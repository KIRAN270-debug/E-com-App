<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{base::layout(~{::section})}">
<head>
<meta charset="UTF-8">
<title>Registration</title>
<link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
	<section>
		<div class="register-container">
			<!-- Message Container -->
			<div id="messageContainer"></div>

			<h2 class="register-title">Create an Account</h2>
			<form th:action="@{/register}" th:object="${user}" method="post"
				enctype="multipart/form-data">

				<!-- Full Name Field -->
				<div class="register-form-group">
					<label for="name"><i class="fa-solid fa-user"></i> Full Name</label>
					<input type="text" id="name" th:field="*{name}" placeholder="Enter your full name" required>
					<div class="field-error" th:if="${#fields.hasErrors('name')}" th:errors="*{name}"></div>
				</div>

				<!-- Email Field -->
				<div class="register-form-group">
					<label for="email"><i class="fa-solid fa-envelope"></i> Email</label>
					<input type="email" id="email" th:field="*{email}" placeholder="Enter your email address" required>
					<div class="field-error" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></div>
				</div>

				<!-- Mobile Number Field -->
				<div class="register-form-group">
					<label for="mobileNumber"><i class="fa-solid fa-phone"></i> Mobile Number</label>
					<input type="text" id="mobileNumber" th:field="*{mobileNumber}" placeholder="Enter your mobile number" required>
					<div class="field-error" th:if="${#fields.hasErrors('mobileNumber')}" th:errors="*{mobileNumber}"></div>
				</div>

				<!-- Address Field -->
				<div class="register-form-group">
					<label for="address"><i class="fa-solid fa-map-marker-alt"></i> Address</label>
					<input type="text" id="address" th:field="*{address}" placeholder="Enter your address" required>
					<div class="field-error" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></div>
				</div>

				<!-- City Field -->
				<div class="register-form-group">
					<label for="city"><i class="fa-solid fa-city"></i> City</label>
					<input type="text" id="city" th:field="*{city}" placeholder="Enter your city" required>
					<div class="field-error" th:if="${#fields.hasErrors('city')}" th:errors="*{city}"></div>
				</div>

				<!-- State Field -->
				<div class="register-form-group">
					<label for="state"><i class="fa-solid fa-flag"></i> State</label>
					<input type="text" id="state" th:field="*{state}" placeholder="Enter your state" required>
					<div class="field-error" th:if="${#fields.hasErrors('state')}" th:errors="*{state}"></div>
				</div>

				<!-- Pincode Field -->
				<div class="register-form-group">
					<label for="pincode"><i class="fa-solid fa-map-pin"></i> Pincode</label>
					<input type="text" id="pincode" th:field="*{pincode}" placeholder="Enter your pincode" required>
					<div class="field-error" th:if="${#fields.hasErrors('pincode')}" th:errors="*{pincode}"></div>
				</div>

				<!-- Password Field -->
				<div class="register-form-group">
					<label for="password"><i class="fa-solid fa-lock"></i> Password</label>
					<input type="password" id="password" th:field="*{password}" placeholder="Enter a strong password" required>
					<div class="field-error" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
				</div>

				<!-- Confirm Password Field -->
				<div class="register-form-group">
					<label for="confirmPassword"><i class="fa-solid fa-lock"></i> Confirm Password</label>
					<input type="password" id="confirmPassword" th:field="*{confirmPassword}" placeholder="Re-enter your password" required>
					<div class="field-error" th:if="${#fields.hasErrors('confirmPassword')}" th:errors="*{confirmPassword}"></div>
				</div>

				<!-- Profile Image Field -->
				<div class="register-form-group">
					<label for="profileImage"><i class="fa-solid fa-image"></i> Profile Image</label>
					<input type="file" id="profileImage" name="profileImage" accept="image/*">
				</div>

				<button type="submit" class="register-btn">
					<i class="fa-solid fa-user-plus"></i> Register
				</button>

				<p class="register-login-link">
					Already have an account? <a th:href="@{/login}">Login here</a>
				</p>
			</form>
		</div>

		<!-- JavaScript -->
		<script th:inline="javascript">
			document.addEventListener("DOMContentLoaded", () => {
				const successMessage = /*[[${successMessage}]]*/ null; // Thymeleaf success message
				const errorMessage = /*[[${errorMessage}]]*/ null; // Thymeleaf error message

				if (successMessage) showMessage(successMessage, false);
				if (errorMessage) showMessage(errorMessage, true);
			});

			function showMessage(message, isError) {
				const container = document.getElementById("messageContainer");

				// Create message element
				const messageElement = document.createElement("div");
				messageElement.className = isError ? "error-message" : "success-message";
				messageElement.textContent = message;

				// Add fade-in animation
				messageElement.classList.add("fade-in");

				// Append message to container
				container.appendChild(messageElement);

				// Remove message after 5 seconds
				setTimeout(() => {
					messageElement.classList.remove("fade-in");
					messageElement.classList.add("fade-out");

					// Remove element from DOM after animation
					setTimeout(() => {
						container.removeChild(messageElement);
					}, 500); // Match the duration of the fade-out animation
				}, 5000); // Display message for 5 seconds
			}
		</script>
	</section>
</body>
</html>